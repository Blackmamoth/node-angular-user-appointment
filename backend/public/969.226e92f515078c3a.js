"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[969],{7969:(x,_,a)=>{a.r(_),a.d(_,{AddClientModule:()=>B});var m=a(9808),o=a(3075),e=a(7587),s=a(4521),T=a(1579),r=a(4619);function q(n,d){if(1&n){const l=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"p",29),e._uU(3),e.qZA()(),e.TgZ(4,"button",30)(5,"span",31),e.NdJ("click",function(){e.CHM(l);const i=e.oxw();return e.KtG(i.onClearAlert())}),e.qZA()()()}if(2&n){const l=e.oxw();e.Gre("alert alert-dismissible bg-",l.alertType," d-flex flex-column flex-sm-row p-5 mb-10"),e.xp6(3),e.Oqu(l.alertMsg),e.xp6(2),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr011.svg")}}function F(n,d){1&n&&(e.TgZ(0,"div",13),e._uU(1," Enter Client's Phone number"),e.qZA())}function U(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function I(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," Mobile number must contain 10 digits only "),e.qZA())}function y(n,d){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,U,2,0,"div",32),e.YNc(2,I,2,0,"div",33),e.qZA()),2&n){const l=e.oxw();let t,i;e.xp6(1),e.Q6J("ngIf",null==(t=l.addClientForm.get("mobile_num"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=l.addClientForm.get("mobile_num"))||null==i.errors?null:i.errors.tenDigitsRequired)}}function N(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function J(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," Mobile number must contain 10 digits only "),e.qZA())}function k(n,d){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,N,2,0,"div",32),e.YNc(2,J,2,0,"div",32),e.qZA()),2&n){const l=e.oxw();let t,i;e.xp6(1),e.Q6J("ngIf",null==(t=l.addClientForm.get("alternate_mobile_num"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=l.addClientForm.get("alternate_mobile_num"))||null==i.errors?null:i.errors.tenDigitsRequired)}}function M(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function Q(n,d){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,M,2,0,"div",32),e.qZA()),2&n){const l=e.oxw();let t;e.xp6(1),e.Q6J("ngIf",null==(t=l.addClientForm.get("name"))||null==t.errors?null:t.errors.required)}}function Y(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function w(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," Please provide a valid email address "),e.qZA())}function S(n,d){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,Y,2,0,"div",32),e.YNc(2,w,2,0,"div",32),e.qZA()),2&n){const l=e.oxw();let t,i;e.xp6(1),e.Q6J("ngIf",null==(t=l.addClientForm.get("email"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=l.addClientForm.get("email"))||null==i.errors?null:i.errors.emailIsInvalid)}}function D(n,d){if(1&n&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&n){const l=d.$implicit;e.s9C("value",l),e.xp6(1),e.hij(" ",l,"")}}function E(n,d){1&n&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function P(n,d){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,E,2,0,"div",32),e.qZA()),2&n){const l=e.oxw();let t;e.xp6(1),e.Q6J("ngIf",null==(t=l.addClientForm.get("package_name"))||null==t.errors?null:t.errors.required)}}const $=function(n){return{active:n}},p=function(n){return{"is-invalid":n}};let O=(()=>{class n{constructor(l,t,i,u){this.router=l,this.route=t,this.appointmentService=i,this.changeDetector=u,this.activeTab="Header",this.packages=["1M","2M","3M","4M","5M","6M","7M","8M","9M","10M","11M","12M"],this.showAlert=!1,this.alertMsg=null,this.alertType=null}ngOnInit(){this.addClientForm=new o.cw({mobile_num:new o.NI(null,[o.kI.required,this.tenDigitsRequired.bind(this)]),alternate_mobile_num:new o.NI(null,[o.kI.required,this.tenDigitsRequired.bind(this)]),name:new o.NI(null,o.kI.required),email:new o.NI(null,[o.kI.required,this.emailIsInvalid.bind(this)]),package_name:new o.NI(null,o.kI.required)}),this.route.params.subscribe(l=>{this.appointmentID=+l.id})}tenDigitsRequired(l){return l.value&&10!==l.value.toString().length?{tenDigitsRequired:!0}:null}emailIsInvalid(l){return/[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+/.test(l.value)?null:{emailIsInvalid:!0}}resetPreview(){this.addClientForm.reset()}checkExistingUser(){var l;const t=null===(l=this.addClientForm.get("mobile_num"))||void 0===l?void 0:l.value.toString();10===t.length&&this.appointmentService.getUserByPhone(t).subscribe(i=>{null!=i&&i.success&&(this.user=null==i?void 0:i.user,this.addClientForm.patchValue(this.user))},i=>{})}clearAlert(){setTimeout(()=>{this.onClearAlert(),this.changeDetector.detectChanges()},3e3)}onClearAlert(){this.showAlert=!1,this.alertMsg=null,this.alertType=null}displayAlert(l,t,i){this.alertMsg=l,this.alertType=t,this.showAlert=!0,this.clearAlert(),i&&setTimeout(()=>this.router.navigate([""]),3e3)}onSubmit(){if(!this.addClientForm.valid)return this.displayAlert("Please fill all fields","danger",!1),void this.clearAlert();let l=this.addClientForm.value;l=Object.assign(Object.assign({},l),{mobile_num:String(l.mobile_num),alternate_mobile_num:String(l.alternate_mobile_num),appointmentID:this.appointmentID}),this.appointmentService.addClientToAppointment(l).subscribe(t=>{t.success&&this.displayAlert(t.message,"success",!0)},t=>{this.displayAlert(t.message,"danger",!1)})}}return n.\u0275fac=function(l){return new(l||n)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(T.O),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-client"]],decls:58,vars:27,consts:[[3,"class",4,"ngIf"],[1,"card","card-custom"],[1,"form",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"tab-content","pt-3"],[1,"tab-pane",3,"ngClass"],[1,"row","mb-10"],["for","mobile_num",1,"col-lg-3","col-form-label","text-lg-end"],[1,"col-lg-9","col-xl-4"],["type","number","id","mobile_num","formControlName","mobile_num",1,"form-control","form-control-solid",3,"ngClass","keyup"],["class","form-text text-muted",4,"ngIf"],["for","alternate_mobile_num",1,"col-lg-3","col-form-label","text-lg-end"],["type","number","id","alternate_mobile_num","formControlName","alternate_mobile_num",1,"form-control","form-control-solid",3,"ngClass"],[1,"form-text","text-muted"],["for","name",1,"col-lg-3","col-form-label","text-lg-end"],["type","text","id","name","formControlName","name",1,"form-control","form-control-solid",3,"ngClass"],["for","email",1,"col-lg-3","col-form-label","text-lg-end"],["type","email","id","email","formControlName","email",1,"form-control","form-control-solid",3,"ngClass"],["for","package_name",1,"col-lg-3","col-form-label","text-lg-end"],["id","package_name","formControlName","package_name","name","model.header.left",1,"form-select","form-select-solid",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer","py-6"],[1,"row"],[1,"col-lg-3"],[1,"col-lg-9"],["type","button",1,"btn","btn-primary","me-2",3,"click"],[1,"indicator-label"],["type","button","id","kt_layout_builder_reset",1,"btn","btn-active-light","btn-color-muted",3,"click"],[1,"d-flex","flex-column","text-light","pe-0","pe-sm-10"],[1,"lead"],["type","button","data-bs-dismiss","alert",1,"position-absolute","position-sm-relative","m-2","m-sm-0","top-0","end-0","btn","btn-icon","ms-sm-auto"],[1,"svg-icon","svg-icon-2x","svg-icon-light",3,"inlineSVG","click"],["class","form-text text-danger",4,"ngIf"],["class"," form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"],[3,"value"]],template:function(l,t){if(1&l&&(e.YNc(0,q,6,5,"div",0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e._uU(8,"Client's Phone Number:"),e.qZA(),e.TgZ(9,"div",8)(10,"input",9),e.NdJ("keyup",function(){return t.checkExistingUser()}),e.qZA(),e.YNc(11,F,2,0,"div",10),e.YNc(12,y,3,2,"div",10),e.qZA()(),e.TgZ(13,"div",6)(14,"label",11),e._uU(15,"Client's Alternate Phone Number:"),e.qZA(),e.TgZ(16,"div",8),e._UZ(17,"input",12),e.TgZ(18,"div",13),e._uU(19," Enter Client's Alternate Phone number"),e.qZA(),e.YNc(20,k,3,2,"div",10),e.qZA()(),e.TgZ(21,"div",6)(22,"label",14),e._uU(23,"Client's Name:"),e.qZA(),e.TgZ(24,"div",8),e._UZ(25,"input",15),e.TgZ(26,"div",13),e._uU(27," Enter Client's Name"),e.qZA(),e.YNc(28,Q,2,1,"div",10),e.qZA()(),e.TgZ(29,"div",6)(30,"label",16),e._uU(31,"Client's Email:"),e.qZA(),e.TgZ(32,"div",8),e._UZ(33,"input",17),e.TgZ(34,"div",13),e._uU(35," Enter Client's Email"),e.qZA(),e.YNc(36,S,3,2,"div",10),e.qZA()(),e.TgZ(37,"div",6)(38,"label",18),e._uU(39,"Package:"),e.qZA(),e.TgZ(40,"div",8)(41,"select",19),e.YNc(42,D,2,2,"option",20),e.qZA(),e.TgZ(43,"div",13),e._uU(44," Select Package"),e.qZA(),e.YNc(45,P,2,1,"div",10),e.qZA()(),e.TgZ(46,"div",21)(47,"div",22),e._UZ(48,"div",23),e.TgZ(49,"div",24)(50,"button",25),e.NdJ("click",function(){return t.onSubmit()}),e.ynx(51),e.TgZ(52,"span",26),e._uU(53,"Add Client"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(54,"button",27),e.NdJ("click",function(){return t.resetPreview()}),e.ynx(55),e.TgZ(56,"span",26),e._uU(57,"Reset"),e.qZA(),e.BQk(),e.qZA()()()()()()()()()),2&l){let i,u,c,g,v,f,C,h,b,A,Z;e.Q6J("ngIf",t.showAlert),e.xp6(2),e.Q6J("formGroup",t.addClientForm),e.xp6(3),e.Q6J("ngClass",e.VKq(15,$,"Header"===t.activeTab)),e.xp6(5),e.Q6J("ngClass",e.VKq(17,p,!(null!=(i=t.addClientForm.get("mobile_num"))&&i.valid)&&(null==(i=t.addClientForm.get("mobile_num"))?null:i.touched))),e.xp6(1),e.Q6J("ngIf",!(null!=(u=t.addClientForm.get("mobile_num"))&&u.touched||null!=(u=t.addClientForm.get("mobile_num"))&&u.valid)),e.xp6(1),e.Q6J("ngIf",!(null!=(c=t.addClientForm.get("mobile_num"))&&c.valid)&&(null==(c=t.addClientForm.get("mobile_num"))?null:c.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(19,p,!(null!=(g=t.addClientForm.get("alternate_mobile_num"))&&g.valid)&&(null==(g=t.addClientForm.get("alternate_mobile_num"))?null:g.touched))),e.xp6(3),e.Q6J("ngIf",!(null!=(v=t.addClientForm.get("alternate_mobile_num"))&&v.valid)&&(null==(v=t.addClientForm.get("alternate_mobile_num"))?null:v.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(21,p,!(null!=(f=t.addClientForm.get("name"))&&f.valid)&&(null==(f=t.addClientForm.get("name"))?null:f.touched))),e.xp6(3),e.Q6J("ngIf",!(null!=(C=t.addClientForm.get("name"))&&C.valid)&&(null==(C=t.addClientForm.get("name"))?null:C.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(23,p,!(null!=(h=t.addClientForm.get("email"))&&h.valid)&&(null==(h=t.addClientForm.get("email"))?null:h.touched))),e.xp6(3),e.Q6J("ngIf",!(null!=(b=t.addClientForm.get("email"))&&b.valid)&&(null==(b=t.addClientForm.get("email"))?null:b.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(25,p,!(null!=(A=t.addClientForm.get("package_name"))&&A.valid)&&(null==(A=t.addClientForm.get("package_name"))?null:A.touched))),e.xp6(1),e.Q6J("ngForOf",t.packages),e.xp6(3),e.Q6J("ngIf",!(null!=(Z=t.addClientForm.get("package_name"))&&Z.valid)&&(null==(Z=t.addClientForm.get("package_name"))?null:Z.touched))}},dependencies:[m.mk,m.sg,m.O5,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.sg,o.u,r.d$]}),n})();var K=a(9219);let B=(()=>{class n{}return n.\u0275fac=function(l){return new(l||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,o.UX,r.vi,K.HK,s.Bz.forChild([{path:"",component:O}])]}),n})()},1579:(x,_,a)=>{a.d(_,{O:()=>e});var m=a(7587),o=a(520);let e=(()=>{class s{constructor(r){this.http=r,this.baseUrl="/api"}getAppointments(){return this.http.get(`${this.baseUrl}/appointments`)}getAppointmentData(r){return this.http.get(`${this.baseUrl}/appointments/${r}`)}getUserByPhone(r){return this.http.post(`${this.baseUrl}/appointments/user`,{mobile_num:r})}setAppointment(r){return this.http.post(`${this.baseUrl}/appointments`,r)}getCountryCodes(){return this.http.get(`${this.baseUrl}/countryCodes`)}getRegistrationCount(){return this.http.get(`${this.baseUrl}/appointments/count`)}updateAppointment(r){return this.http.patch(`${this.baseUrl}/appointments/${r.npat_id}`,r)}deleteAppointment(r){return this.http.delete(`${this.baseUrl}/appointments/${r}`)}addClientToAppointment(r){return this.http.post(`${this.baseUrl}/appointments/addClient`,r)}getAppointmentBetweenDates(r,q){return this.http.post(`${this.baseUrl}/appointments/dates`,{date1:r,date2:q})}getHolidays(){return this.http.get(`${this.baseUrl}/appointments/holidays`)}}return s.\u0275fac=function(r){return new(r||s)(m.LFG(o.eN))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);