"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[969],{7969:(R,A,a)=>{a.r(A),a.d(A,{AddClientModule:()=>O});var u=a(9808),o=a(3075),e=a(7587),b=a(4521),T=a(1579),Z=a(4619);function q(l,d){if(1&l){const n=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"p",29),e._uU(3),e.qZA()(),e.TgZ(4,"button",30)(5,"span",31),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onClearAlert())}),e.qZA()()()}if(2&l){const n=e.oxw();e.Gre("alert alert-dismissible bg-",n.alertType," d-flex flex-column flex-sm-row p-5 mb-10"),e.xp6(3),e.Oqu(n.alertMsg),e.xp6(2),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr011.svg")}}function x(l,d){1&l&&(e.TgZ(0,"div",13),e._uU(1," Enter Client's Phone number"),e.qZA())}function F(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function I(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," Mobile number must contain 10 digits only "),e.qZA())}function N(l,d){if(1&l&&(e.TgZ(0,"div",13),e.YNc(1,F,2,0,"div",32),e.YNc(2,I,2,0,"div",33),e.qZA()),2&l){const n=e.oxw();let t,i;e.xp6(1),e.Q6J("ngIf",null==(t=n.addClientForm.get("mobile_num"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=n.addClientForm.get("mobile_num"))||null==i.errors?null:i.errors.tenDigitsRequired)}}function J(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function k(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," Mobile number must contain 10 digits only "),e.qZA())}function y(l,d){if(1&l&&(e.TgZ(0,"div",13),e.YNc(1,J,2,0,"div",32),e.YNc(2,k,2,0,"div",32),e.qZA()),2&l){const n=e.oxw();let t,i;e.xp6(1),e.Q6J("ngIf",null==(t=n.addClientForm.get("alternate_mobile_num"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=n.addClientForm.get("alternate_mobile_num"))||null==i.errors?null:i.errors.tenDigitsRequired)}}function U(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function Q(l,d){if(1&l&&(e.TgZ(0,"div",13),e.YNc(1,U,2,0,"div",32),e.qZA()),2&l){const n=e.oxw();let t;e.xp6(1),e.Q6J("ngIf",null==(t=n.addClientForm.get("name"))||null==t.errors?null:t.errors.required)}}function M(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function Y(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," Please provide a valid email address "),e.qZA())}function w(l,d){if(1&l&&(e.TgZ(0,"div",13),e.YNc(1,M,2,0,"div",32),e.YNc(2,Y,2,0,"div",32),e.qZA()),2&l){const n=e.oxw();let t,i;e.xp6(1),e.Q6J("ngIf",null==(t=n.addClientForm.get("email"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=n.addClientForm.get("email"))||null==i.errors?null:i.errors.emailIsInvalid)}}function S(l,d){if(1&l&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&l){const n=d.$implicit;e.s9C("value",n),e.xp6(1),e.hij(" ",n,"")}}function D(l,d){1&l&&(e.TgZ(0,"div",34),e._uU(1," This field is required "),e.qZA())}function P(l,d){if(1&l&&(e.TgZ(0,"div",13),e.YNc(1,D,2,0,"div",32),e.qZA()),2&l){const n=e.oxw();let t;e.xp6(1),e.Q6J("ngIf",null==(t=n.addClientForm.get("package_name"))||null==t.errors?null:t.errors.required)}}const E=function(l){return{active:l}},m=function(l){return{"is-invalid":l}};let V=(()=>{class l{constructor(n,t,i,r){this.router=n,this.route=t,this.appointmentService=i,this.changeDetector=r,this.activeTab="Header",this.packages=["1M","2M","3M","4M","5M","6M","7M","8M","9M","10M","11M","12M"],this.showAlert=!1,this.alertMsg=null,this.alertType=null}ngOnInit(){this.addClientForm=new o.cw({mobile_num:new o.NI(null,[o.kI.required,this.tenDigitsRequired.bind(this)]),alternate_mobile_num:new o.NI(null,[o.kI.required,this.tenDigitsRequired.bind(this)]),name:new o.NI(null,o.kI.required),email:new o.NI(null,[o.kI.required,this.emailIsInvalid.bind(this)]),package_name:new o.NI(null,o.kI.required)}),this.route.params.subscribe(n=>{this.appointmentID=+n.id})}tenDigitsRequired(n){return n.value&&10!==n.value.toString().length?{tenDigitsRequired:!0}:null}emailIsInvalid(n){return/[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+/.test(n.value)?null:{emailIsInvalid:!0}}resetPreview(){this.addClientForm.reset()}checkExistingUser(){var n;const t=null===(n=this.addClientForm.get("mobile_num"))||void 0===n?void 0:n.value.toString();10===t.length&&this.appointmentService.getUserByPhone(t).subscribe(i=>{var r;null!=i&&i.success&&(this.user=null==i?void 0:i.user,this.addClientForm.patchValue(this.user),this.client_id=null===(r=null==i?void 0:i.user)||void 0===r?void 0:r.id)},i=>{})}clearAlert(){setTimeout(()=>{this.onClearAlert(),this.changeDetector.detectChanges()},3e3)}onClearAlert(){this.showAlert=!1,this.alertMsg=null,this.alertType=null}displayAlert(n,t,i){this.alertMsg=n,this.alertType=t,this.showAlert=!0,this.clearAlert(),i&&setTimeout(()=>this.router.navigate([""]),3e3)}onSubmit(){if(!this.addClientForm.valid)return this.displayAlert("Please fill all fields","danger",!1),void this.clearAlert();let n=this.addClientForm.value;n=Object.assign(Object.assign({},n),{mobile_num:String(n.mobile_num),alternate_mobile_num:String(n.alternate_mobile_num),appointmentID:this.appointmentID,client_id:this.client_id}),this.appointmentService.addClientToAppointment(n).subscribe(t=>{t.success&&(this.displayAlert(t.message,"success",!0),this.changeDetector.detectChanges())},t=>{this.displayAlert(t.message,"danger",!1)})}}return l.\u0275fac=function(n){return new(n||l)(e.Y36(b.F0),e.Y36(b.gz),e.Y36(T.O),e.Y36(e.sBO))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-add-client"]],decls:58,vars:27,consts:[[3,"class",4,"ngIf"],[1,"card","card-custom"],[1,"form",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"tab-content","pt-3"],[1,"tab-pane",3,"ngClass"],[1,"row","mb-10"],["for","mobile_num",1,"col-lg-3","col-form-label","text-lg-end"],[1,"col-lg-9","col-xl-4"],["type","number","id","mobile_num","formControlName","mobile_num",1,"form-control","form-control-solid",3,"ngClass","keyup"],["class","form-text text-muted",4,"ngIf"],["for","alternate_mobile_num",1,"col-lg-3","col-form-label","text-lg-end"],["type","number","id","alternate_mobile_num","formControlName","alternate_mobile_num",1,"form-control","form-control-solid",3,"ngClass"],[1,"form-text","text-muted"],["for","name",1,"col-lg-3","col-form-label","text-lg-end"],["type","text","id","name","formControlName","name",1,"form-control","form-control-solid",3,"ngClass"],["for","email",1,"col-lg-3","col-form-label","text-lg-end"],["type","email","id","email","formControlName","email",1,"form-control","form-control-solid",3,"ngClass"],["for","package_name",1,"col-lg-3","col-form-label","text-lg-end"],["id","package_name","formControlName","package_name","name","model.header.left",1,"form-select","form-select-solid",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer","py-6"],[1,"row"],[1,"col-lg-3"],[1,"col-lg-9"],["type","button",1,"btn","btn-primary","me-2",3,"click"],[1,"indicator-label"],["type","button","id","kt_layout_builder_reset",1,"btn","btn-active-light","btn-color-muted",3,"click"],[1,"d-flex","flex-column","text-light","pe-0","pe-sm-10"],[1,"lead"],["type","button","data-bs-dismiss","alert",1,"position-absolute","position-sm-relative","m-2","m-sm-0","top-0","end-0","btn","btn-icon","ms-sm-auto"],[1,"svg-icon","svg-icon-2x","svg-icon-light",3,"inlineSVG","click"],["class","form-text text-danger",4,"ngIf"],["class"," form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"],[3,"value"]],template:function(n,t){if(1&n&&(e.YNc(0,q,6,5,"div",0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e._uU(8,"Client's Phone Number:"),e.qZA(),e.TgZ(9,"div",8)(10,"input",9),e.NdJ("keyup",function(){return t.checkExistingUser()}),e.qZA(),e.YNc(11,x,2,0,"div",10),e.YNc(12,N,3,2,"div",10),e.qZA()(),e.TgZ(13,"div",6)(14,"label",11),e._uU(15,"Client's Alternate Phone Number:"),e.qZA(),e.TgZ(16,"div",8),e._UZ(17,"input",12),e.TgZ(18,"div",13),e._uU(19," Enter Client's Alternate Phone number"),e.qZA(),e.YNc(20,y,3,2,"div",10),e.qZA()(),e.TgZ(21,"div",6)(22,"label",14),e._uU(23,"Client's Name:"),e.qZA(),e.TgZ(24,"div",8),e._UZ(25,"input",15),e.TgZ(26,"div",13),e._uU(27," Enter Client's Name"),e.qZA(),e.YNc(28,Q,2,1,"div",10),e.qZA()(),e.TgZ(29,"div",6)(30,"label",16),e._uU(31,"Client's Email:"),e.qZA(),e.TgZ(32,"div",8),e._UZ(33,"input",17),e.TgZ(34,"div",13),e._uU(35," Enter Client's Email"),e.qZA(),e.YNc(36,w,3,2,"div",10),e.qZA()(),e.TgZ(37,"div",6)(38,"label",18),e._uU(39,"Package:"),e.qZA(),e.TgZ(40,"div",8)(41,"select",19),e.YNc(42,S,2,2,"option",20),e.qZA(),e.TgZ(43,"div",13),e._uU(44," Select Package"),e.qZA(),e.YNc(45,P,2,1,"div",10),e.qZA()(),e.TgZ(46,"div",21)(47,"div",22),e._UZ(48,"div",23),e.TgZ(49,"div",24)(50,"button",25),e.NdJ("click",function(){return t.onSubmit()}),e.ynx(51),e.TgZ(52,"span",26),e._uU(53,"Add Client"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(54,"button",27),e.NdJ("click",function(){return t.resetPreview()}),e.ynx(55),e.TgZ(56,"span",26),e._uU(57,"Reset"),e.qZA(),e.BQk(),e.qZA()()()()()()()()()),2&n){let i,r,s,c,_,g,p,v,f,C,h;e.Q6J("ngIf",t.showAlert),e.xp6(2),e.Q6J("formGroup",t.addClientForm),e.xp6(3),e.Q6J("ngClass",e.VKq(15,E,"Header"===t.activeTab)),e.xp6(5),e.Q6J("ngClass",e.VKq(17,m,!(null!=(i=t.addClientForm.get("mobile_num"))&&i.valid)&&(null==(i=t.addClientForm.get("mobile_num"))?null:i.touched))),e.xp6(1),e.Q6J("ngIf",!(null!=(r=t.addClientForm.get("mobile_num"))&&r.touched||null!=(r=t.addClientForm.get("mobile_num"))&&r.valid)),e.xp6(1),e.Q6J("ngIf",!(null!=(s=t.addClientForm.get("mobile_num"))&&s.valid)&&(null==(s=t.addClientForm.get("mobile_num"))?null:s.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(19,m,!(null!=(c=t.addClientForm.get("alternate_mobile_num"))&&c.valid)&&(null==(c=t.addClientForm.get("alternate_mobile_num"))?null:c.touched))),e.xp6(3),e.Q6J("ngIf",!(null!=(_=t.addClientForm.get("alternate_mobile_num"))&&_.valid)&&(null==(_=t.addClientForm.get("alternate_mobile_num"))?null:_.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(21,m,!(null!=(g=t.addClientForm.get("name"))&&g.valid)&&(null==(g=t.addClientForm.get("name"))?null:g.touched))),e.xp6(3),e.Q6J("ngIf",!(null!=(p=t.addClientForm.get("name"))&&p.valid)&&(null==(p=t.addClientForm.get("name"))?null:p.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(23,m,!(null!=(v=t.addClientForm.get("email"))&&v.valid)&&(null==(v=t.addClientForm.get("email"))?null:v.touched))),e.xp6(3),e.Q6J("ngIf",!(null!=(f=t.addClientForm.get("email"))&&f.valid)&&(null==(f=t.addClientForm.get("email"))?null:f.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(25,m,!(null!=(C=t.addClientForm.get("package_name"))&&C.valid)&&(null==(C=t.addClientForm.get("package_name"))?null:C.touched))),e.xp6(1),e.Q6J("ngForOf",t.packages),e.xp6(3),e.Q6J("ngIf",!(null!=(h=t.addClientForm.get("package_name"))&&h.valid)&&(null==(h=t.addClientForm.get("package_name"))?null:h.touched))}},dependencies:[u.mk,u.sg,u.O5,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.sg,o.u,Z.d$]}),l})();var K=a(9219);let O=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[u.ez,o.UX,Z.vi,K.HK,b.Bz.forChild([{path:"",component:V}])]}),l})()}}]);