"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[728],{9728:(P,_,d)=>{d.r(_),d.d(_,{DashboardModule:()=>F});var c=d(9808),g=d(4521),r=d(3075),t=d(7587),C=d(1579),u=d(4619),m=d(9966);function x(n,a){if(1&n&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function Z(n,a){if(1&n&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function A(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",38)(1,"a",42)(2,"span",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.toAddClient(i))}),t.qZA()()()}2&n&&(t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr009.svg"))}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",38)(1,"a",44)(2,"span",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.toAddClient(i))}),t.qZA()()()}2&n&&(t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr012.svg"))}function v(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",33)(3,"span",34),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"a",35),t._uU(7),t.qZA(),t.TgZ(8,"span",36),t._uU(9),t.qZA()(),t.TgZ(10,"td",37),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td",38)(14,"span",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.toEditPage(s))}),t._uU(15,"Edit"),t.qZA(),t.TgZ(16,"span",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteAppointment(s))}),t._uU(17,"Delete"),t.qZA()(),t.YNc(18,A,3,1,"td",41),t.YNc(19,T,3,1,"td",41),t.qZA()}if(2&n){const e=a.$implicit,o=a.index;t.xp6(4),t.hij(" ",o+1," "),t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Oqu(e.appointment_for),t.xp6(2),t.Oqu(t.xi3(12,6,e.date_of_appointment,"medium")),t.xp6(7),t.Q6J("ngIf",!e.added_client_id),t.xp6(1),t.Q6J("ngIf",e.added_client_id)}}const h=function(n,a){return{itemsPerPage:n,currentPage:a}};function D(n,a){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,v,20,9,"tr",32),t.ALo(2,"paginate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.appointmentsData,t.WLB(4,h,e.itemsPerPage,e.pageNum)))}}function y(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",38)(1,"a",42)(2,"span",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.toAddClient(i))}),t.qZA()()()}2&n&&(t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr009.svg"))}function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",38)(1,"a",44)(2,"span",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.toAddClient(i))}),t.qZA()()()}2&n&&(t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr012.svg"))}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",33)(3,"span",34),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"a",35),t._uU(7),t.qZA(),t.TgZ(8,"span",36),t._uU(9),t.qZA()(),t.TgZ(10,"td",37),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td",38)(14,"span",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.toEditPage(s))}),t._uU(15,"Edit"),t.qZA(),t.TgZ(16,"span",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteAppointment(s))}),t._uU(17,"Delete"),t.qZA()(),t.YNc(18,y,3,1,"td",41),t.YNc(19,w,3,1,"td",41),t.qZA()}if(2&n){const e=a.$implicit,o=a.index;t.xp6(4),t.hij(" ",o+1," "),t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Oqu(e.appointment_for),t.xp6(2),t.Oqu(t.xi3(12,6,e.date_of_appointment,"medium")),t.xp6(7),t.Q6J("ngIf",e.user_id==e.added_user_id),t.xp6(1),t.Q6J("ngIf",e.user_id!=e.added_user_id)}}function q(n,a){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,N,20,9,"tr",32),t.ALo(2,"paginate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.filteredAppointmentsData,t.WLB(4,h,e.itemsPerPage,e.pageNum)))}}let J=(()=>{class n{constructor(e,o,i){this.appointmentService=e,this.router=o,this.changeDetector=i,this.activeTab="kt_table_widget_5_tab_1",this.appointmentsData=[],this.noFilter=!0,this.itemsPerPageOptions=[5,10,15,20],this.appointmentTypes=["New Registration","Re Registration","Diet Change"],this.filteredAppointmentsData=[],this.itemsPerPage=5}toEditPage(e){this.router.navigate(["/appointments",e.npat_id,"edit"])}changeItemsPerPage(){var e;const o=null===(e=this.filterForm.get("itemsPerPage"))||void 0===e?void 0:e.value;this.itemsPerPage=o,this.changeDetector.detectChanges()}setTab(e){this.activeTab=e}activeClass(e){return e===this.activeTab?"show active":""}getAppointments(){this.appointmentService.getAppointments().subscribe(e=>{console.log(e),this.appointmentsData=e,this.changeDetector.detectChanges()})}pageChanged(e){this.pageNum=e}deleteAppointment(e){confirm("Are you sure you want to delete this row?")&&this.appointmentService.deleteAppointment(null==e?void 0:e.npat_id).subscribe(i=>{this.getAppointments()})}onDateFilter(){const{date1:e,date2:o}=this.filterForm.value;e&&o&&this.appointmentService.getAppointmentBetweenDates(e,o).subscribe(i=>{this.filteredAppointmentsData=i,console.log(this.filteredAppointmentsData),this.filteredAppointmentsData.length>0&&(this.noFilter=!1,this.changeDetector.detectChanges())})}onChooseFilter(){const e=this.filterForm.value,{name:o,appointmentType:i,date1:s,date2:l}=e;if(!(o&&i&&s&&l))return this.noFilter=!0,void(this.filteredAppointmentsData=[]);if(i){const b=this.appointmentsData.filter(p=>p.appointment_for===i);this.filteredAppointmentsData=this.filteredAppointmentsData.filter(p=>p.appointment_for===i),b.forEach(p=>{this.filteredAppointmentsData.includes(p)||this.filteredAppointmentsData.push(p)})}o&&this.appointmentsData.filter(p=>p.name.startsWith(o)).forEach(p=>{this.filteredAppointmentsData.includes(p)||this.filteredAppointmentsData.push(p)}),this.filteredAppointmentsData.length>0&&(this.noFilter=!1,this.changeDetector.detectChanges())}toAddClient(e){this.router.navigate(["/appointments",e.npat_id,"add-client"])}ngOnInit(){this.getAppointments(),this.filterForm=new r.cw({itemsPerPage:new r.NI(5),appointmentType:new r.NI(null),name:new r.NI(null),date1:new r.NI(null),date2:new r.NI(null)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.O),t.Y36(g.F0),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:57,vars:7,consts:[[1,"bg-white","p-4","rounded-2"],[1,"p-4",3,"formGroup"],[1,"row","mb-10"],[1,"col-md-4","col-xl-4"],["for","show",1,"col-form-label","text-lg-end"],[1,"col-lg-9","col-xl-6"],["formControlName","itemsPerPage","id","show","name","model.header.left",1,"form-select","form-select-solid",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["for","appointType",1,"col-form-label","text-lg-end"],["formControlName","appointmentType","id"," appointType","name","model.header.left",1,"form-select","form-select-solid",3,"change"],["for","name",1,"col-form-label","text-lg-end"],["type","text","id","name","formControlName","name",1,"form-control","form-control-solid",3,"keyup"],["for","date1",1,"col-form-label","text-lg-end"],["type","date","id","date1","formControlName","date1",1,"form-control","form-control-solid",3,"change"],["for","date2",1,"col-form-label","text-lg-end"],["type","date","id","date2","formControlName","date2",1,"form-control","form-control-solid",3,"change"],[3,"pageChange"],[1,"card-body","py-3"],[1,"tab-content"],["id","kt_table_widget_5_tab_1",1,"tab-pane","fade",3,"ngClass"],[1,"table-responsive"],[1,"table","table-row-dashed","table-row-gray-200","align-middle","gs-0","gy-4"],[1,"border-0"],[1,"p-0","w-50px"],[1,"p-0","min-w-150px"],[1,"p-0","min-w-140px"],[1,"p-0","min-w-110px"],[1,"p-0","min-w-50px"],[4,"ngIf"],["id","kt_table_widget_5_tab_2",1,"tab-pane","fade",3,"ngClass"],[3,"value"],[4,"ngFor","ngForOf"],[1,"symbol","symbol-45px","me-2"],[1,"symbol-label"],[1,"text-dark","fw-bolder","text-hover-primary","mb-1","fs-6"],[1,"text-muted","fw-bold","d-block"],[1,"text-end","text-muted","fw-bold"],[1,"text-end"],[1,"btn","btn-success","me-3",3,"click"],[1,"btn","btn-danger",3,"click"],["class","text-end",4,"ngIf"],[1,"btn","btn-sm","btn-icon","btn-bg-light","btn-active-color-danger"],[1,"svg-icon","svg-icon-2",3,"inlineSVG","click"],[1,"btn","btn-sm","btn-icon","btn-bg-light","btn-active-color-dan"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Show"),t.qZA(),t.TgZ(6,"div",5)(7,"select",6),t.NdJ("change",function(){return o.changeItemsPerPage()}),t.YNc(8,x,2,2,"option",7),t.qZA(),t.TgZ(9,"div",8),t._uU(10," Number of record to show "),t.qZA()()(),t.TgZ(11,"div",3)(12,"label",9),t._uU(13,"Appointment Type"),t.qZA(),t.TgZ(14,"div",5)(15,"select",10),t.NdJ("change",function(){return o.onChooseFilter()}),t.YNc(16,Z,2,2,"option",7),t.qZA(),t.TgZ(17,"div",8),t._uU(18," Number of record to show "),t.qZA()()(),t.TgZ(19,"div",3)(20,"label",11),t._uU(21,"Client's Name:"),t.qZA(),t.TgZ(22,"div",5)(23,"input",12),t.NdJ("keyup",function(){return o.onChooseFilter()}),t.qZA(),t.TgZ(24,"div",8),t._uU(25," Enter Client's Name"),t.qZA()()()(),t.TgZ(26,"div",2)(27,"div",3)(28,"label",13),t._uU(29,"Start Date:"),t.qZA(),t.TgZ(30,"div",5)(31,"input",14),t.NdJ("change",function(){return o.onDateFilter()}),t.qZA(),t.TgZ(32,"div",8),t._uU(33," Select start date"),t.qZA()()(),t.TgZ(34,"div",3)(35,"label",15),t._uU(36,"End Date:"),t.qZA(),t.TgZ(37,"div",5)(38,"input",16),t.NdJ("change",function(){return o.onDateFilter()}),t.qZA(),t.TgZ(39,"div",8),t._uU(40," Select end date"),t.qZA()()()()(),t.TgZ(41,"pagination-controls",17),t.NdJ("pageChange",function(s){return o.pageChanged(s)}),t.qZA(),t.TgZ(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",21)(46,"table",22)(47,"thead")(48,"tr",23),t._UZ(49,"th",24)(50,"th",25)(51,"th",26)(52,"th",27)(53,"th",28),t.qZA()(),t.YNc(54,D,3,7,"tbody",29),t.YNc(55,q,3,7,"tbody",29),t.qZA()()(),t._UZ(56,"div",30),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.filterForm),t.xp6(7),t.Q6J("ngForOf",o.itemsPerPageOptions),t.xp6(8),t.Q6J("ngForOf",o.appointmentTypes),t.xp6(28),t.Q6J("ngClass",o.activeClass("kt_table_widget_5_tab_1")),t.xp6(10),t.Q6J("ngIf",o.noFilter),t.xp6(1),t.Q6J("ngIf",!o.noFilter),t.xp6(1),t.Q6J("ngClass",o.activeClass("kt_table_widget_5_tab_2")))},dependencies:[c.mk,c.sg,c.O5,u.d$,m.LS,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,c.uU,m._s]}),n})();var f=d(4230);let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,g.Bz.forChild([{path:"",component:J}]),f.HB,f._9,u.vi,m.JX,r.UX]}),n})()}}]);